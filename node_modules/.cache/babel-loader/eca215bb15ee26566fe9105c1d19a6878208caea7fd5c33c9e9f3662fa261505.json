{"ast":null,"code":"import _slicedToArray from\"D:/projects/whatsapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{saveHistory}from\"../utils/contactUtils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainForm=function MainForm(_ref){var setContactHistory=_ref.setContactHistory,setYourContacts=_ref.setYourContacts;var _useState=useState(\"91\"),_useState2=_slicedToArray(_useState,2),countryCode=_useState2[0],setCountryCode=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),number=_useState4[0],setNumber=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),validNumber=_useState6[0],setValidNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var handleCountryCode=function handleCountryCode(event){setCountryCode(event.target.value);};function now(){var now=new Date();var formattedString=\"Contacted on: \".concat(now.toUTCString());return formattedString;}var validatePhoneNumber=function validatePhoneNumber(number){var phoneRegex=/^1?[-.\\s]?\\(?(\\d{3})\\)?[-.\\s]?(\\d{3})[-.\\s]?(\\d{4})(?:\\s*(?:#|x\\.?|ext\\.?|extension)\\s*(\\d+))?$/;return phoneRegex.test(number)&&number.length===10;};var handleOnChange=function handleOnChange(event){var value=event.target.value;var phoneNumber=value.replace(/[^0-9]/g,\"\");setNumber(phoneNumber);if(validatePhoneNumber(phoneNumber)){setValidNumber(true);}else{setValidNumber(false);}};var saveContact=function saveContact(){// [ {name:\"name1\",number:723487236},...]\nvar phoneNumber=countryCode+number;var savedContacts=localStorage.getItem(\"savedContacts\");var savedContactsArray=savedContacts?JSON.parse(savedContacts):[];var nameExists=savedContactsArray.some(function(contact){return contact.name===name;});var numberExists=savedContactsArray.some(function(contact){return contact.number===phoneNumber;});if(nameExists||numberExists){setError(true);}else{setError(false);savedContactsArray.push({name:name,number:countryCode+number});localStorage.setItem(\"savedContacts\",JSON.stringify(savedContactsArray));}setYourContacts(savedContactsArray);};return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-dark text-sm\",children:\"Country\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleCountryCode,value:countryCode,type:\"text\",className:\"form-control\",placeholder:\"Country Code\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-dark text-sm\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleOnChange,value:number,type:\"tel\",className:\"form-control\",placeholder:\"Enter valid number (10 digits )\"}),/*#__PURE__*/_jsxs(\"a\",{onClick:function onClick(){saveHistory(countryCode+number,now());setContactHistory(JSON.parse(localStorage.getItem(\"history\")));},rel:\"noreferrer\",target:\"_blank\",href:\"http://wa.me/\".concat(countryCode+number),className:\"btn btn-success my-3 m-auto w-100 \".concat(validNumber?\"\":\"disabled\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-whatsapp\"}),\" Chat on whatsapp\"]}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setName(event.target.value);},value:name,type:\"text\",className:\"form-control\",placeholder:\"Enter name to save contact on browser\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveContact,className:\"btn btn-success w-100 my-3 \".concat(validNumber&&name?\"\":\"disabled\"),children:\"Save Contact\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:\"Error: The name or number already exists\"})]})]})});};export default MainForm;","map":{"version":3,"names":["React","useState","saveHistory","jsx","_jsx","jsxs","_jsxs","MainForm","_ref","setContactHistory","setYourContacts","_useState","_useState2","_slicedToArray","countryCode","setCountryCode","_useState3","_useState4","number","setNumber","_useState5","_useState6","validNumber","setValidNumber","_useState7","_useState8","name","setName","_useState9","_useState10","error","setError","handleCountryCode","event","target","value","now","Date","formattedString","concat","toUTCString","validatePhoneNumber","phoneRegex","test","length","handleOnChange","phoneNumber","replace","saveContact","savedContacts","localStorage","getItem","savedContactsArray","JSON","parse","nameExists","some","contact","numberExists","push","setItem","stringify","className","children","onChange","type","placeholder","onClick","rel","href"],"sources":["D:/projects/whatsapp/src/components/MainForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { saveHistory } from \"../utils/contactUtils\";\r\n\r\nconst MainForm = ({ setContactHistory, setYourContacts }) => {\r\n  const [countryCode, setCountryCode] = useState(\"91\");\r\n  const [number, setNumber] = useState(\"\");\r\n  const [validNumber, setValidNumber] = useState(false);\r\n  const [name, setName] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n\r\n  const handleCountryCode = (event) => {\r\n    setCountryCode(event.target.value);\r\n  };\r\n\r\n  function now() {\r\n    const now = new Date();\r\n    const formattedString = `Contacted on: ${now.toUTCString()}`;\r\n    return formattedString;\r\n  }\r\n\r\n  const validatePhoneNumber = (number) => {\r\n    const phoneRegex =\r\n      /^1?[-.\\s]?\\(?(\\d{3})\\)?[-.\\s]?(\\d{3})[-.\\s]?(\\d{4})(?:\\s*(?:#|x\\.?|ext\\.?|extension)\\s*(\\d+))?$/;\r\n    return phoneRegex.test(number) && number.length === 10;\r\n  };\r\n  const handleOnChange = (event) => {\r\n    const value = event.target.value;\r\n    const phoneNumber = value.replace(/[^0-9]/g, \"\");\r\n    setNumber(phoneNumber);\r\n    if (validatePhoneNumber(phoneNumber)) {\r\n      setValidNumber(true);\r\n    } else {\r\n      setValidNumber(false);\r\n    }\r\n  };\r\n  const saveContact = () => {\r\n    // [ {name:\"name1\",number:723487236},...]\r\n    let phoneNumber = countryCode + number;\r\n    let savedContacts = localStorage.getItem(\"savedContacts\");\r\n    let savedContactsArray = savedContacts ? JSON.parse(savedContacts) : [];\r\n    let nameExists = savedContactsArray.some(\r\n      (contact) => contact.name === name\r\n    );\r\n    let numberExists = savedContactsArray.some(\r\n      (contact) => contact.number === phoneNumber\r\n    );\r\n\r\n    if (nameExists || numberExists) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n      savedContactsArray.push({\r\n        name: name,\r\n        number: countryCode + number,\r\n      });\r\n      localStorage.setItem(\"savedContacts\", JSON.stringify(savedContactsArray));\r\n    }\r\n    setYourContacts(savedContactsArray);\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-lg-6 py-3\">\r\n      <div className=\"row\">\r\n        <div className=\"col-sm-4\">\r\n          <p className=\"text-dark text-sm\">Country</p>\r\n          <input\r\n            onChange={handleCountryCode}\r\n            value={countryCode}\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Country Code\"\r\n          />\r\n        </div>\r\n        <div className=\"col-sm-8\">\r\n          <p className=\"text-dark text-sm\">Phone Number</p>\r\n          <input\r\n            onChange={handleOnChange}\r\n            value={number}\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Enter valid number (10 digits )\"\r\n          />\r\n          <a\r\n            onClick={() => {\r\n              saveHistory(countryCode + number, now());\r\n              setContactHistory(JSON.parse(localStorage.getItem(\"history\")));\r\n            }}\r\n            rel=\"noreferrer\"\r\n            target=\"_blank\"\r\n            href={`http://wa.me/${countryCode + number}`}\r\n            className={`btn btn-success my-3 m-auto w-100 ${\r\n              validNumber ? \"\" : \"disabled\"\r\n            }`}\r\n          >\r\n            <i className=\"bi bi-whatsapp\" /> Chat on whatsapp\r\n          </a>\r\n          <input\r\n            onChange={(event) => {\r\n              setName(event.target.value);\r\n            }}\r\n            value={name}\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Enter name to save contact on browser\"\r\n          />\r\n          <button\r\n            onClick={saveContact}\r\n            className={`btn btn-success w-100 my-3 ${\r\n              validNumber && name ? \"\" : \"disabled\"\r\n            }`}\r\n          >\r\n            Save Contact\r\n          </button>\r\n          {error && (\r\n            <p className=\"text-danger\">\r\n              Error: The name or number already exists\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}